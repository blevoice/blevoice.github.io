{% if page.author_profile or layout.author_profile %}
  <div class="sidebar sticky">
    {% include author-profile.html %}
    
    <div class="doc-categories">
      <nav class="nav__list">
        {% for item in site.data.navigation.main %}
          {% assign current = nil %}
          {% if page.url contains item.url %}
            {% assign current = 'active' %}
          {% endif %}
          
          <div class="nav__items {{ current }}">
            <a href="{{ item.url }}" class="nav__link">
              {{ item.title }}
              {% if current %}<span class="active-indicator">â€º</span>{% endif %}
            </a>
            
            {% assign collection_name = item.title | downcase | replace: ' ', '-' %}
            {% assign collection = site[collection_name] %}
            
            {% if collection %}
              <ul class="nav__sublist">
                {% assign sorted_docs = collection | sort: "date" | reverse %}
                {% for doc in sorted_docs limit:5 %}
                  <li class="nav__sublist-item">
                    <a href="{{ doc.url }}" 
                       class="{% if doc.url == page.url %}active{% endif %}">
                      {{ doc.title }}
                      {% if doc.path contains '.pdf' %}
                        <span class="pdf-label">PDF</span>
                      {% endif %}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            {% endif %}
          </div>
        {% endfor %}
      </nav>
    </div>
  </div>
{% endif %}
